//tealium universal tag - utag.136 ut4.0.202001211015, Copyright 2020 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[function(a,b){try{if(1){(function(exports,global){"use strict";var _={};var autoEvents=[];var sessionId;var _constant={clientVersion:"3.0.1",timeUnit:"sec",na:"NA",empty:"",binsName:"VF-BINS",binsUuid:"c7b152e2-4c0f-49aa-abe3-e657dc85e224"};var _event={type:{page:"Page",uiControl:"UIControl",uiCustom:"UICustom"},element:{pageDomLoaded:"page-dom-loaded",pageLoaded:"page-loaded",pageView:"Page View"}};var _status={homeDoc:"not_fired",pageLoad:true,pageDomLoad:true,isSMAPIEnabled:false,angularLocationChangeEnabled:true};_.homeDocResponse=undefined;exports.internal=_;exports.setVerbose=false;exports.Environment={VF_PRE:"https://events-pre.sp.vodafone.com",VF_PROD:"https://events.sp.vodafone.com",GCP_TEST:"https://gcpsmapi-test.vodafone.com",GCP_PRE:"https://gcpsmapi-pre.vodafone.com",GCP_PROD:"https://gcpsmapi.vodafone.com"};_.debug=function(){if(exports.setVerbose){var args=Array.prototype.slice.call(arguments);console.log.apply(console,args);}};_.removeAllElements=function(array){array.length=0;};_.addElements=function(array,elements){elements.forEach(function(element){array.push(element);});};_.contains=function(array,element){return array.indexOf(element)>=0;};_.isUndefined=function(x){return typeof x==="undefined";};_.isValidEvent=function(event){return(!_.isUndefined(event)&&!_.isUndefined(event.payload)&&!_.isUndefined(event.payload.xVfEvents));};_.validateField=function(field){if(_.isUndefined(field)||field===null||(typeof field==="string"&&field.trim()===_constant.empty)){return _constant.na;}
return field;};_.setDefault=function(obj,key,defaultValue){if(obj&&_.isUndefined(obj[key])){obj[key]=defaultValue;}};_.setValue=function(obj,key,value){if(obj){obj[key]=value;}};_.forKeyValue=function(obj,func){if(typeof func==="function"){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){func(key,obj[key]);}}}};_.merge=function(obj,defaults){_.forKeyValue(defaults,function(key,value){_.setDefault(obj,key,value);});};_.bytesFrom=function(aString){var bytes=[];if(typeof aString==="string"){for(var i=0;i<aString.length;++i){bytes.push(aString.charCodeAt(i));}}
return bytes;};_.setHeaders=function(xhr,headers){_.forKeyValue(headers,function(header,headerValue){xhr.setRequestHeader(header,headerValue);});};_.httpAsyncDefault=true;_.http=function(opts){var c;if(_.isUndefined(opts)){_.debug("http() called without parameters");return;}
_.setDefault(opts,"async",_.httpAsyncDefault);_.setDefault(opts,"data",null);_.setDefault(opts,"headers",{});if(opts.data!==null){var arr=JSON.parse(opts.data);for(var i=0;i<arr.length;i++){var keys=Object.keys(arr[i]);for(var j=0;j<keys.length;j++){var value=keys[j];if(value.length===0){delete arr[i][j];}}}
arr=arr.map(function(obj){return obj.xVfEvents;});c=JSON.stringify(arr);}
var xhr=new XMLHttpRequest();xhr.open(opts.method,opts.url,opts.async);_.setHeaders(xhr,opts.headers);if(opts.async){if(opts.onSuccess){xhr.onload=function(){opts.onSuccess(xhr.responseText,xhr.status);};}
if(opts.onError){xhr.onerror=function(){opts.onError(xhr.responseText,xhr.status);};}
if(opts.data===null){xhr.send(opts.data);}else{_.debug(c);xhr.send(c);}
return null;}
if(opts.data===null){xhr.send(opts.data);}else{_.debug(c);xhr.send(c);}
setTimeout(function(){xhr.abort();},2000);return{responseText:xhr.responseText,status:xhr.status};};_.serializer=function(type){if(type.indexOf("json")!==-1){return JSON.stringify;}
throw new Error("cannot serialize data to "+type);};_.submitLink=function(linkDescription,headers,http,gzipCompressor){if(!linkDescription){throw new Error("link description missing, will not make http requests");}
if(!(linkDescription.type&&linkDescription.method&&linkDescription.href)){return function(){return null;};}
var serializer=_.serializer(linkDescription.type);return function(data){var reqHeaders={"content-type":linkDescription.type};var serializedData=serializer(data);if(typeof gzipCompressor==="function"){serializedData=gzipCompressor(_.bytesFrom(serializedData));_.merge(reqHeaders,{"content-encoding":"gzip"});}
_.merge(reqHeaders,headers);_.debug(linkDescription.method+
"ing "+
serializedData+
" to "+
linkDescription.href);if(typeof http==="function"){http({method:linkDescription.method,url:linkDescription.href,headers:reqHeaders,data:serializedData
});}};};_.getClientSettings=function(linkDescription,metadata){if(_.isUndefined(linkDescription)||_.isUndefined(metadata)){throw new Error("link description/metadata missing, will not make http request to get client settings");}
var headers={Accept:linkDescription.type};_.merge(headers,metadata);var response=_.http({method:"GET",url:linkDescription.href,headers:headers,async:false});if(response.status>=200&&response.status<400){return JSON.parse(response.responseText);}
throw new Error("failed to GET client settings from "+linkDescription.href);};_.getHomeDoc=function(homeDocUrl,metaData,callbacks){var headers={Accept:"application/json"};_status.homeDoc="fired";_.merge(headers,metaData);_.http({method:"GET",url:homeDocUrl,headers:headers,onSuccess:function(responseText,status){if(status>=200&&status<400){_.homeDocResponse=JSON.parse(responseText);if(_.submitEventsLink(_.homeDocResponse)){_status.homeDoc="success";}else{_status.homeDoc="error";_.homeDocResponse=undefined;throw new Error("Invalid response received");}
if(callbacks&&Array.isArray(callbacks)){callbacks.forEach(function(callback){if(callback&&typeof callback==="function"){callback();}});}}else{_status.homeDoc="error";_.homeDocResponse=undefined;throw new Error("Home document received with status "+status);}},onError:function(){_status.homeDoc="error";_.homeDocResponse=undefined;throw new Error("failed to GET home document from "+homeDocUrl);}});};_.submitEventsLink=function(homeDoc){return homeDoc&&homeDoc.links?homeDoc.links["http://a42.vodafone.com/rels/sec/submit-events"]:null;};_.clientSettingsLink=function(homeDoc){return homeDoc&&homeDoc.links?homeDoc.links["http://a42.vodafone.com/rels/sec/settings"]:null;};_.payloads=function(events){if(typeof events==="object"){return events.map(function(obj){if(typeof obj==="object"){return obj.payload;}});}};_.addEnteringPage=function(){var enteringPageURL=window.location.href;var enteringPageTitle=document.title;var enteringPage=enteringPageTitle+"-"+enteringPageURL;if(/\d{10}\d?\d?\d?/.test(enteringPage)){enteringPage=enteringPage.replace(/\d{9}\d?\d?\d?/g,"<PII-redacted>");}
return enteringPage;};_.addUserAgent=function(){return navigator.userAgent;};_.addNetworkBearer=function(){var networkBearer;if(navigator.connection){networkBearer=navigator.connection.effectiveType;if(networkBearer==="slow-2g"){networkBearer="2g";}else if(networkBearer===undefined){return _constant.na;}}else{return _constant.na;}
return networkBearer.toUpperCase();};_.addTraceSubjectRegion=function(){var language;if(window.navigator.languages){language=window.navigator.languages[0];}else{language=window.navigator.userLanguage||window.navigator.language;}
if(!_.isUndefined(language)&&language!==null){if(language.indexOf("-")!==-1){var subjectRegion=language.split("-");return subjectRegion[0].toUpperCase();}
return language.toUpperCase();}
return _constant.na;};_.addOSversion=function(){var os=_constant.na;var nAgt=navigator.userAgent;var nVer=navigator.appVersion;var clientStrings=[{s:"Windows 10",r:/(Windows\s10.0|Windows\sNT\s10.0)/},{s:"Windows 8.1",r:/(Windows\s8.1|Windows\sNT\s6.3)/},{s:"Windows 8",r:/(Windows\s8|Windows\sNT\s6.2)/},{s:"Windows 7",r:/(Windows\s7|Windows\sNT\s6.1)/},{s:"Windows Vista",r:/Windows\sNT\s6.0/},{s:"Windows Server 2003",r:/Windows\sNT\s5.2/},{s:"Windows XP",r:/(Windows\sNT\s5.1|Windows\sXP)/},{s:"Windows 2000",r:/(Windows\sNT\s5.0|Windows\s2000)/},{s:"Windows ME",r:/(Win\s9x\s4.90|Windows\sME)/},{s:"Windows 98",r:/(Windows\s98|Win98)/},{s:"Windows 95",r:/(Windows\s95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows\sNT\s4.0|WinNT4.0|WinNT|Windows\sNT)/},{s:"Windows CE",r:/Windows\sCE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac\sOS\sX/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\sJeeves\/Teoma|ia_archiver)/}];for(var id in clientStrings){var cs=clientStrings[id];if(cs.r.test(nAgt)){os=cs.s;break;}}
var osVersion=_constant.na;if(/Windows/.test(os)){osVersion=/Windows\s(.*)/.exec(os)[1];os="Windows";}
switch(os){case"Mac OS X":osVersion=/Mac\sOS\sX\s(10[._\d]+)/.exec(nAgt)[1];break;case"Android":osVersion=/Android\s([._\d]+)/.exec(nAgt)[1];break;case"iOS":osVersion=/OS\s(\d+)_(\d+)_?(\d+)?/.exec(nVer);osVersion=osVersion[1]+"."+osVersion[2]+"."+(osVersion[3]|0);break;}
var jscd={os:os,osVersion:osVersion};return jscd;};_.addLocale=function(){var language;if(window.navigator.languages){language=window.navigator.languages[0];}else{language=window.navigator.userLanguage||window.navigator.language;}
if(!_.isUndefined(language)&&language!==null){return language;}
return _constant.na;};_.addEvents=function(events){if(!_.isUndefined(events)){_.payloads(events).forEach(function(obj){_.merge(obj,{xVfEvents:autoEvents});});}};_.addScreenMetric=function(){var screenOrientation=_constant.na;var scrWidth=screen.width;var scrHeight=screen.height;if(!scrWidth){scrWidth=_constant.empty;}
if(!scrHeight){scrHeight=_constant.empty;}
if(window.innerHeight>=window.innerWidth){screenOrientation="Portrait";}else if(window.innerHeight<window.innerWidth){screenOrientation="Landscape";}
var screenMetric={width:scrWidth,height:scrHeight,rotation:screenOrientation};return screenMetric;};_.generateUUID=function(){var d=new Date().getTime();if(typeof performance!=="undefined"&&typeof performance.now==="function"){d+=performance.now();}
return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==="x"?r:(r&0x3)|0x8).toString(16);});};_.addUUID=function(){var nameEQ="VF-UUID=";var ca=document.cookie.split(";");var UUID;ca.forEach(function(c){while(c.charAt(0)===" "){c=c.substring(1,c.length);}
if(c.indexOf(nameEQ)===0){var cookieText=c.substring(nameEQ.length,c.length);UUID=cookieText;}else{var expires=_constant.empty;var value=_.generateUUID();var date=new Date();date.setTime(date.getTime()+3650*24*60*60*1000);expires="; expires="+date.toUTCString();document.cookie="VF-UUID="+value+expires+"; path=/";UUID=value;}});return UUID;};_.isCookieEnabled=function(){var cookieEnabled=!!navigator.cookieEnabled;if(typeof navigator.cookieEnabled==="undefined"&&!cookieEnabled){document.cookie="testCookie";cookieEnabled=document.cookie.indexOf("testCookie")!==-1;document.cookie="testCookie; expires=Thu, 01-Jan-1970 00:00:01 GMT";}
return cookieEnabled;};_.setCookie=function(cookieName,cookieValue,cookieExpire){if(cookieExpire===_constant.empty){document.cookie=cookieName+"="+cookieValue+";path=/";}else{var date=new Date();date.setTime(date.getTime()+cookieExpire*60*1000);var expires="expires="+date.toUTCString();document.cookie=cookieName+"="+cookieValue+";"+expires+";path=/";}};_.getCookie=function(cookieName){var name=cookieName+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1);}
if(c.indexOf(name)===0){return c.substring(name.length,c.length);}}
return _constant.empty;};_.getSessionId=function(){var timeInMinutes=30;var sessionCookie="VF-SID";if(_.isCookieEnabled()){sessionId=_.getCookie(sessionCookie);if(sessionId===_constant.empty){sessionId=_.generateUUID();_.setCookie(sessionCookie,sessionId,timeInMinutes);}else{_.setCookie(sessionCookie,sessionId,timeInMinutes);}}else{if(_.isUndefined(sessionId)||sessionId===_constant.empty){sessionId=_.generateUUID();}}
return sessionId;};_.removeSessionId=function(){_.setCookie("VF-SID",_.getSessionId(),30);};_.getOptStatus=function(){var optCookie="VF-OPT";if(_.getCookie(optCookie)===_constant.empty){_status.isSMAPIEnabled=false;_.setCookie(optCookie,"false",_constant.empty);}else{_status.isSMAPIEnabled=_.getCookie(optCookie).toLowerCase()==="true";}
return _status.isSMAPIEnabled;};_.setOptStatus=function(status){var optCookie="VF-OPT";_status.isSMAPIEnabled=status;_.setCookie(optCookie,_status.isSMAPIEnabled,_constant.empty);};_.throttle=function(throttledKeys,ignored){if(throttledKeys&&throttledKeys.contains){return function(key,action){if(!throttledKeys.contains(key)){return action();}
return ignored;};}};_.throttleFreeEventsFilter=function(cache){var throttle=_.throttle(cache);return function(events){var throttleFreeEvents=[];if(Array.isArray(events)){events.forEach(function(event){var duplication=event.duplication;if(duplication){throttle(duplication.key,function(){throttleFreeEvents.push(event);cache.put(duplication.key,duplication.repeatSeconds);});}else{throttleFreeEvents.push(event);}});}
return throttleFreeEvents;};};_.TemporaryCache=function(){var cache={};var intervals=[];this.contains=function(item){return!_.isUndefined(cache[item]);};this.put=function(item,ticks){if(item&&typeof ticks==="number"){cache[item]=ticks;}
return this;};this.advanceTime=function(ticks){if(typeof ticks==="number"){var newCache={};_.forKeyValue(cache,function(item,remainingTicks){var newTicks=remainingTicks-ticks;if(newTicks>0){newCache[item]=newTicks;}});cache=newCache;}};this.startClock=function(){var self=this;intervals.push(setInterval(function(){self.advanceTime(1);},1000));return this;};this._ticksFor=function(key){return cache[key];};this._clearIntervals=function(){intervals.forEach(function(id){clearInterval(id);});};};_.Cron=function(task,repeatSeconds){var intervals=[];var lastRun=new Date();this.delay=function(){lastRun=new Date();};intervals.push(setInterval(function(){var now=new Date();var millisSinceLastRun=now.getTime()-lastRun.getTime();if(millisSinceLastRun>=repeatSeconds*1000){lastRun=now;task();}},500));this._clearIntervals=function(){intervals.forEach(function(id){clearInterval(id);});};};_.Buffer=function(size,onFullHandler,bufferFlushSeconds){var bufferedElements=[];var cron;this.handler=function(handler){onFullHandler=handler;};this.flush=function(){if(bufferedElements.length>0){if(typeof onFullHandler==="function"){_.debug("calling onFullHandler on "+JSON.stringify(bufferedElements));onFullHandler(bufferedElements);}
_.removeAllElements(bufferedElements);if(cron){cron.delay();}
_.debug("buffer flushed");}};this.filter=function(){bufferedElements=bufferedElements.filter(function(element){return _.contains([_event.type.page,_event.type.uiControl],element.xVfEvents["event-type"]);});this._elements=bufferedElements;};this.add=function(elements){if(Array.isArray(elements)){_.addElements(bufferedElements,elements);_.debug("Buffering "+
elements.length+
" new element(s), buffer has "+
bufferedElements.length+
" element(s)");this._elements=bufferedElements;}
if(bufferedElements.length>=size){this.flush();}};this.clear=function(){_.removeAllElements(bufferedElements);_.debug("buffer cleared");};this._elements=bufferedElements;if(size>0&&bufferFlushSeconds){cron=new _.Cron(this.flush,bufferFlushSeconds);}};_.redactPatterns=[{keyword:"MASKEDMSISDN",pattern:/[0-9]{9}/g}];_.redact=function(value){var typeToString=function(){if(typeof value==="object"){return JSON.stringify(value);}
if(typeof value==="string"){return value;}
if(value&&typeof value.toString==="function"){return value.toString();}};if(this.isUndefined(value)){return value;}
var strValue=typeToString();var original=strValue;_.redactPatterns.forEach(function(obj){strValue=strValue.replace(obj.pattern,obj.keyword);});if(strValue!==original){return strValue;}
return value;};_.eventOccured=function(action,name,value){var deviceOrientation=_.addScreenMetric();var date=new Date();var timeStamp=date.getTime();var pageName=_.addEnteringPage();var transID=_.generateUUID();if(/\d{10}\d?\d?\d?/.test(value)){value=value.replace(/\d{9}\d?\d?\d?/g,"<PII-redacted>");}
var occ={"event-type":_.validateField(action),"event-element":_.validateField(name),"page-name":pageName,"subpage-name":_constant.na,"event-description":_.validateField(value),"x-vf-trace-timestamp":timeStamp,"device-orientation":deviceOrientation.rotation,"x-vf-trace-transaction-id":transID,"x-vf-trace-session-id":_.getSessionId(),"x-vf-net-type":_constant.na,"x-vf-net-band":_constant.na};if((occ["event-type"]===_event.type.page&&occ["event-element"]===_event.element.pageView)||occ["event-type"]===_event.type.page){occ["event-description"]=this.redact(occ["event-description"]);}
return occ;};_.msToSec=function(ms){if(typeof ms==="number"){var sec=ms>=0?ms/1000:_constant.empty;if(sec===_constant.empty){return sec;}
if(sec%1===0){return sec;}
return Number(sec.toFixed(3));}
return _constant.empty;};_.resourceTiming=function(resource){if(!_.isUndefined(resource)){_.debug(resource);var resTime={};resTime.url=resource.name;resTime.type=resource.initiatorType;resTime.start=_.msToSec(resource.startTime);resTime.duration=_.msToSec(resource.responseEnd-resource.startTime);resTime.redirect=_.msToSec(resource.redirectEnd-resource.redirectStart);resTime.dns=_.msToSec(resource.domainLookupEnd-resource.domainLookupStart);resTime.tcp=_.msToSec(resource.connectEnd-resource.connectStart);resTime.ssl=_.msToSec(resource.secureConnectionStart>0?resource.connectEnd-resource.secureConnectionStart:_constant.empty);resTime.request=_.msToSec(resource.responseStart-resource.requestStart);resTime.response=_.msToSec(resource.responseStart===0?_constant.empty:resource.responseEnd-resource.responseStart);resTime.httpCode=_constant.empty;return resTime;}
return _constant.na;};_.navigationTiming=function(navigation){if(!_.isUndefined(navigation)){_.debug(navigation);var navTime={};navTime.url=window.location.href;navTime.type="navigation";navTime.start=0;navTime.httpCode=_constant.empty;navTime.duration=_.msToSec(navigation.loadEventEnd-navigation.navigationStart);navTime.redirect=_.msToSec(navigation.redirectEnd-navigation.redirectStart);navTime.dns=_.msToSec(navigation.domainLookupEnd-navigation.domainLookupStart);navTime.tcp=_.msToSec(navigation.connectEnd-navigation.connectStart);navTime.ssl=_.msToSec(navigation.secureConnectionStart===0?_constant.empty:navigation.connectEnd-navigation.secureConnectionStart);navTime.request=_.msToSec(navigation.responseStart-navigation.requestStart);navTime.response=_.msToSec(navigation.responseEnd-navigation.responseStart);navTime.frontEnd=_.msToSec(navigation.loadEventEnd-navigation.domLoading);navTime.backEnd=_.msToSec(navigation.responseEnd-navigation.navigationStart);return navTime;}
return _constant.na;};_.handlePageDOMLoadEvent=function(submitter){var handler=function(){_status.pageDomLoad=false;setTimeout(function(){_.pageDomLoadEventHandler(submitter);},100);};if(global.addEventListener){global.addEventListener("load",handler,true);var interval=setInterval(function(){if(document.readyState==="complete"){clearInterval(interval);if(_status.pageDomLoad){handler();}}},1000);}};_.handlePageLoadEvent=function(submitter,configureNetworkMonitoring){var handler=function(){_status.pageLoad=false;setTimeout(function(){_.pageLoadEventHandler(submitter,configureNetworkMonitoring);},100);};if(global.addEventListener){global.addEventListener("load",handler,true);var interval=setInterval(function(){if(document.readyState==="complete"){clearInterval(interval);if(_status.pageLoad){handler();}}},1000);}};_.handlePageViewEvent=function(submitter,includeNavTime){if(_.isUndefined(performance)||performance===null){autoEvents=_.eventOccured(_event.type.page,_event.element.pageView,_constant.na);}else{var resourceMetrics=[];if(includeNavTime&&performance.timing){resourceMetrics.push(_.navigationTiming(performance.timing));}
var resources=performance.getEntriesByType("resource");if(resources.length>0){resources.forEach(function(resource){resourceMetrics.push(_.resourceTiming(resource));});autoEvents=_.eventOccured(_event.type.page,_event.element.pageView,resourceMetrics);performance.clearResourceTimings();}}
submitter.submitEvents([{payload:{}}]);};_.handleDOMChanges=function(submitter){var addClickEventHandler=function(event){_.clickEventHandler(event,this,submitter);};if(typeof MutationObserver==="function"){_.observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){var nodes=mutation.addedNodes;for(var n=0;n<nodes.length;n++){var element=nodes[n];if(element instanceof Element){var inputs=element.querySelectorAll("button, [onclick], [type='submit'], [type='button'], [type='reset'], [type='checkbox'],"+
" [type='radio'], [type='file'], [type='color'], select, a, img");for(var i=0;i<inputs.length;i++){if(global.addEventListener){inputs[i].addEventListener("click",addClickEventHandler);}}}}});});}};_.handleBrowserClose=function(submitter,opts){var onClose=_.createCloseHandler(submitter,opts.configureNetworkMonitoring);if(global.addEventListener){global.addEventListener("beforeunload",onClose);global.addEventListener("unload",onClose);}
_.removeSessionId();};_.pageDomLoadEventHandler=function(submitter){var pageLoadTime=(window.performance.timing.domContentLoadedEventEnd-
window.performance.timing.navigationStart)/
1000;if(pageLoadTime<0){autoEvents=_.eventOccured(_event.type.page,_event.element.pageDomLoaded,_constant.na);}else{autoEvents=_.eventOccured(_event.type.page,_event.element.pageDomLoaded,pageLoadTime+" "+_constant.timeUnit);}
submitter.submitEvents([{payload:{}}]);};_.pageLoadEventHandler=function(submitter,configureNetworkMonitoring){var pageLoadTime=(window.performance.timing.loadEventEnd-
window.performance.timing.navigationStart)/
1000;if(pageLoadTime<0){autoEvents=_.eventOccured(_event.type.page,_event.element.pageLoaded,_constant.na);}else{autoEvents=_.eventOccured(_event.type.page,_event.element.pageLoaded,pageLoadTime+" "+_constant.timeUnit);}
submitter.submitEvents([{payload:{}}]);if(configureNetworkMonitoring===true){_.handlePageViewEvent(submitter,true);}};_.clickEventHandler=function(event,element,submitter){if(_.isUndefined(event)||_.isUndefined(element)||_.isUndefined(submitter)){throw new Error("event/element/eventSubmitter is undefined");}
var ariaLabel=_constant.empty;var paramValue;if(element.getAttribute("aria-label")){ariaLabel=element.getAttribute("aria-label");}
var targetText=ariaLabel||event.text;var tValue=element.value?element.value:targetText;var eventText=tValue||element.innerText;var paramType=element.type?element.type:element.localName;var elementTagName=element.tagName.toUpperCase();var paramName=elementTagName+" - "+paramType;switch(elementTagName){case"INPUT":if(paramType.toUpperCase()==="CHECKBOX"){paramValue=eventText+" - "+(element.checked?"Checked":"Unchecked");}else{paramValue=eventText;}
break;case"A":paramValue=eventText+" (URL: "+element.href+")";break;case"IMG":paramValue=eventText+element.src.split("/").pop();break;default:paramValue=eventText;break;}
autoEvents=_.eventOccured(_event.type.uiControl,paramName,"Click - "+this.redact(paramValue));submitter.submitEvents([{payload:{}}]);};_.createCloseHandler=function(submitter,configureNetworkMonitoring){var done;return function(){if(!done){if(configureNetworkMonitoring===true){_.handlePageViewEvent(submitter);}
done=true;autoEvents=_.eventOccured(_event.type.page,_constant.na,"Unloaded");_.httpAsyncDefault=false;submitter.submitEvents([{payload:{}}]);submitter.flushBuffer();}};};_.validateEnvironment=function(homeDocUrl){var valid=false;if(typeof homeDocUrl==="string"){for(var env in exports.Environment){if(homeDocUrl===exports.Environment[env]){valid=true;break;}}}
return valid;};exports.angularSPA=function($rootScope,submitter){var startTime=0;var endTime=0;var routeChangeTime=function(){var time=endTime-startTime;return time>=0?time/1000+" "+_constant.timeUnit:_constant.na;};var capturePageRefresh=function(){autoEvents=_.eventOccured(_event.type.page,_event.element.pageDomLoaded,routeChangeTime());submitter.submitEvents([{payload:{}}]);};$rootScope.$on("$locationChangeStart",function(){if(_status.angularLocationChangeEnabled){startTime=new Date().getTime();}});$rootScope.$on("$locationChangeSuccess",function(){if(_status.angularLocationChangeEnabled){endTime=new Date().getTime();capturePageRefresh();}});$rootScope.$on("$routeChangeStart",function(){startTime=new Date().getTime();_status.angularLocationChangeEnabled=false;});$rootScope.$on("$routeChangeError",function(){endTime=new Date().getTime();capturePageRefresh();_status.angularLocationChangeEnabled=true;});$rootScope.$on("$routeChangeSuccess",function(){endTime=new Date().getTime();capturePageRefresh();_status.angularLocationChangeEnabled=true;});$rootScope.$on("$stateChangeStart",function(){startTime=new Date().getTime();_status.angularLocationChangeEnabled=false;});$rootScope.$on("$stateChangeError",function(){endTime=new Date().getTime();capturePageRefresh();_status.angularLocationChangeEnabled=true;});$rootScope.$on("$stateChangeSuccess",function(){endTime=new Date().getTime();capturePageRefresh();_status.angularLocationChangeEnabled=true;});};exports.EventSubmitter=function(homeDocUrl,metadata,opts){if(_.isUndefined(homeDocUrl)||_.isUndefined(metadata)){throw new Error("homeDocUrl/metadata is undefined");}
if(!_.validateEnvironment(homeDocUrl)){throw new Error("homeDocUrl is invalid");}
if(_.isUndefined(metadata["x-vf-trace-source"])||_.isUndefined(metadata["x-vf-trace-source-version"])){throw new Error("metadata must contain x-vf-trace-source and x-vf-trace-source-version property");}
if(_.isUndefined(opts)){opts={};}
_.setDefault(opts,"configureNetworkMonitoring",false);_.setValue(opts,"bufferSize",10);if(_.getCookie(_constant.binsName)===_constant.empty){_.setCookie(_constant.binsName,_constant.binsUuid,_constant.empty);sessionId=_.generateUUID();_.setCookie("VF-SID",sessionId,30);}
_status.isSMAPIEnabled=_.getOptStatus()===_constant.empty?false:_.getOptStatus();_.setValue(metadata,"seclib-client-version",_constant.clientVersion);_.merge(metadata,{"x-vf-trace-platform":"JS"});var OSversion=_.addOSversion();_.merge(metadata,{"x-vf-trace-os-version":OSversion.osVersion});_.merge(metadata,{"x-vf-trace-os-name":OSversion.os});var netBearer=_.addNetworkBearer();_.merge(metadata,{"x-vf-trace-network-bearer":netBearer});var appName=window.location.hostname;_.merge(metadata,{"x-vf-trace-application-name":appName});var subRegion=_.addTraceSubjectRegion();_.merge(metadata,{"x-vf-trace-subject-region":subRegion});var traceUID=_.addUUID();_.merge(metadata,{"x-vf-trace-subject-id":traceUID});var userAgent=_.addUserAgent();_.merge(metadata,{"x-vf-trace-user-agent":userAgent});_.merge(metadata,{"install-id":traceUID});var locale=_.addLocale();_.merge(metadata,{"x-vf-trace-mcc":_constant.empty});_.merge(metadata,{"x-vf-trace-mnc":_constant.empty});_.merge(metadata,{"x-vf-trace-locale":locale});var scrMetric=_.addScreenMetric();_.merge(metadata,{"x-vf-trace-width":scrMetric.width});_.merge(metadata,{"x-vf-trace-height":scrMetric.height});var onFullHandler;var buffer=new _.Buffer(opts.bufferSize,onFullHandler,opts.bufferFlushSeconds);this._buffer=buffer;var callbackOnFullHandler=function(){onFullHandler=_.submitLink(_.submitEventsLink(_.homeDocResponse),metadata,_.http,opts.gzipCompressor);};var callbackBuffer=function(){buffer.handler(onFullHandler);};_.getHomeDoc(homeDocUrl,metadata,[callbackOnFullHandler,callbackBuffer]);this.getSettings=function(){return _.getClientSettings(_.clientSettingsLink(_.homeDocResponse),metadata);};this.flushBuffer=function(){buffer.flush();};this.clearBuffer=function(){buffer.clear();};this._render=function(){var functionSerializer=function(key,value){if(typeof value==="function"){return"function() {...}";}
return value;};return JSON.stringify({serviceDocument:homeDocUrl,headers:metadata,configuration:opts,payload:buffer._elements},functionSerializer,3);};var tempCache=new _.TemporaryCache().startClock();this._cache=tempCache;var removeThrottledEvents=_.throttleFreeEventsFilter(tempCache);this.getSMAPIStatus=function(){return _status.isSMAPIEnabled;};this.turnSMAPIOnOff=function(status){if(typeof status==="boolean"){if(status===true&&!_status.isSMAPIEnabled){_.setOptStatus(status);}
if(status===false&&_status.isSMAPIEnabled){_.setOptStatus(status);buffer.filter();}
return;}
throw new Error("status is invalid");};var submitter=this;this.submitEvents=function(events){setTimeout(function(){if(opts.configureNetworkMonitoring===true){if(_.isUndefined(performance)||performance===null){_.debug("Performance object is not available");}else if(performance.getEntriesByType("resource").length>=140){_.handlePageViewEvent(submitter);}}},0);var eventsToSubmit=removeThrottledEvents(events);if(_status.homeDoc==="error"){_.getHomeDoc(homeDocUrl,metadata,[callbackOnFullHandler,callbackBuffer]);}
_.addEvents(eventsToSubmit);_.debug(eventsToSubmit);buffer.add(_.payloads(eventsToSubmit));};this.logCustomEvent=function(eventElement,eventDescription,onPage,onSubPage,customJson,duplication){if(!_status.isSMAPIEnabled){return;}
var validate=function(field){return typeof eventElement==="string"?_.validateField(field):_constant.na;};var event={duplication:duplication,payload:{xVfEvents:{"event-type":"UICustom","event-element":validate(eventElement),"event-description":validate(eventDescription),"page-name":validate(onPage),"subpage-name":validate(onSubPage),"x-vf-trace-timestamp":new Date().getTime(),"x-vf-trace-transaction-id":_.generateUUID(),"x-vf-trace-session-id":_.getSessionId(),"device-orientation":_.addScreenMetric().rotation,"x-vf-net-type":_constant.na,"x-vf-net-band":_constant.na}}};for(var key in customJson){event.payload.xVfEvents["x-vf-custom-"+_.validateField(key)]=customJson[key];}
submitter.submitEvents([event]);};_.handleBrowserClose(this,opts);_.handlePageDOMLoadEvent(this);_.handlePageLoadEvent(this,opts);if(document.body!=null){var inputs=document.body.querySelectorAll("button, [onclick], [type='submit'], [type='button'], [type='reset'], [type='checkbox'], "+
"[type='radio'], [type='file'], [type='color'], select, a, img");if(global.addEventListener){inputs.forEach(function(input){input.addEventListener("click",function(event){_.clickEventHandler(event,this,submitter);});});}}
_.handleDOMChanges(this);if(!_.isUndefined(_.observer)){_.observer.observe(document||document.body,{childList:true,subtree:true});}};})(typeof window.exports==="undefined"?window.sec={}:window.exports,window);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(window.submitter){console.log("SecLib submitter instance already exists");return;}
var serviceDocUrl="https://gcpsmapi-pre.vodafone.com";if(b["ut.env"]=="prod"){serviceDocUrl="https://gcpsmapi.vodafone.com";}
var headers={"x-vf-trace-source":"js:web.vodafone.pt","x-vf-trace-source-version":"VF-PT-GCP-PREPROD","x-vf-trace-application-name":"Vodafone PT","seclib-client-version":"SecLib-3.0.1"};var opts={'isNetworkPerformanceEnabled':true,'configureNetworkMonitoring':true};var submitterVar=new sec.EventSubmitter(serviceDocUrl,headers,opts);window.submitter=submitterVar;sec.setVerbose=false;}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("136","vodafone.pt-universal");}catch(error){utag.DB(error);}
