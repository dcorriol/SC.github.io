Vue.component("mini-basket",{template:"#miniBasket",mixins:[utils,requestHandler,requestValidations,basketUtils,productsUtils,loadingAnimations,toasterUtils,urlUtils,catalogTypeUtils],props:{visible:{type:Boolean},close:{type:Function},targetRedirectUrlShoppingCart:{type:String},targetRedirectUrlEmptyButton:{type:String},setItemsNumber:{type:Function},toggleMiniBasket:{type:Function}},data:function(){return{i18n:{emptyBasketPrimaryMessage:this.i18nUtils().getProperty("vf_miniBasket.empty.primary.message"),emptyBasketSecondaryMessage:this.i18nUtils().getProperty("vf_miniBasket.empty.secondary.message"),emptyBasketButton:this.i18nUtils().getProperty("vf_miniBasket.empty.button"),notEmptyBasketTitle:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.title"),notEmptyBasketProducts:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.products"),notEmptyBasketProduct:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.product"),notEmptyBasketButton:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.button"),notEmptyBasketColor:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.color"),notEmptyBasketStorage:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.storage"),notEmptyBasketQuantity:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.quantity"),notEmptyBasketTotal:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.total"),notEmptyBasketPlus:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.place"),notEmptyBasketPoints:this.i18nUtils().getProperty("vf_miniBasket.notEmpty.points"),notEmptyBasketAutomaticDiscount:this.i18nUtils().getProperty("vf_miniBasket.automaticDiscount"),productAddedToCart:this.i18nUtils().getProperty("vf_miniBasket.productAddedToCart"),removedFromCart:this.i18nUtils().getProperty("vf_miniBasket.removedFromCart")},redirectEmptyButtonLink:"/content/digital-sites/pt/loja.html",redirectNotEmptyButtonLink:"/content/digital-sites/pt/loja/carrinho.html",redirectToCartLink:"/content/digital-sites/pt/loja/carrinho.html",constants:{BASKET:"basket",PRODUCTS:"products",BASKET_MODULE:"basket/basket",BASKET_GETTER_COUNTER:"basket/counter",SPACE:" ",EUR:"EUR",POINTS:"POINTS",CLOSE_TOASTER:"close-toaster",BASKET_GETTER_IS_CV_BASKET:"basket/isCVBasket"},successProductAdded:!1}},methods:{redirectToCart:function(){window.location.href=window.location.origin+this.redirectToCartLink},removeProductFromBasket:function(a){var b=this;b.loadAnimationReplaceImage({renderLocation:"item-"+a,imageToReplace:"item-"+a+"-content",defaultColor:!0,style:"height: 150px;",withMask:!1});b.removeItemFromBasket(a,function(){b.removeAnimationReplaceImage("item-"+a,"item-"+a+"-content")})},closeMiniBasket:function(){this.close();this.successProductAdded=!1},showMiniBasketCounter:function(){this.isEshop()&&this.setItemsNumber(basketStore.getters[this.constants.BASKET_GETTER_COUNTER])}},mounted:function(){this.targetRedirectUrlEmptyButton&&""!==this.targetRedirectUrlEmptyButton&&(this.redirectEmptyButtonLink=this.targetRedirectUrlEmptyButton);this.targetRedirectUrlShoppingCart&&""!==this.targetRedirectUrlShoppingCart&&(this.redirectToCartLink=this.targetRedirectUrlShoppingCart);this.loadBasket(this.showMiniBasketCounter)},computed:{basket:function(){return basketStore.state.basket.basket},counter:function(){return basketStore.getters[this.constants.BASKET_GETTER_COUNTER]},isCVBasket:function(){return basketStore.getters[this.constants.BASKET_GETTER_IS_CV_BASKET]}},watch:{basket:function(){basketStore.state.basket.basketUpdated?(this.showMiniBasketCounter(),this.successProductAdded=!0,this.toggleMiniBasket(),ToasterEventBus.$emit(this.constants.CLOSE_TOASTER,!1)):this.successProductAdded=!1}}});