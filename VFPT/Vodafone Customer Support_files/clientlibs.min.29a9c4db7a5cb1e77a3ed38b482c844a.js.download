Vue.component("search-mobile",{mixins:[utils,navigation,loadingAnimations],template:"#digital-help-search-mobile",props:{},data:function(){return{i18nLabels:{breadcrumbStart:this.i18nUtils().getProperty("breadcrumb_start"),searchPlaceholder:this.i18nUtils().getProperty("search_placeholder"),searchCancel:this.i18nUtils().getProperty("search_cancel"),search:this.i18nUtils().getProperty("search_label"),numberOfCharactersToHints:this.i18nUtils().getProperty("search_number_of_characters_to_hints"),searchGetMoreResults:this.i18nUtils().getProperty("search_get_more_results"),
searchCloseResults:this.i18nUtils().getProperty("search_close_results"),searchBackSearchResults:this.i18nUtils().getProperty("search_back_search_results"),searchErrorMessage:this.i18nUtils().getProperty("search_error_message"),searchWithoutResultsMessage:this.i18nUtils().getProperty("search_without_results_message"),breadcrumbMobileSeeTopics:this.i18nUtils().getProperty("breadcrumb_mobile_see_topics")},searchInput:"",showHints:!1,showResults:!1,hints:[],withoutResults:!1,hasError:!1,onlySearch:!1,
results:[],page:1,firstSearchSelect:!1,hasVisibleResults:!1,test:!0,tmp:!1}},watch:{searchInput:function(a,b){""!==a?a!==b&&(this.onlySearch?(this.onlySearch=!1,this.search()):this.getHints()):this.showResults||this.resetValues()}},created:function(){document.addEventListener("click",function(a){var b=document.getElementById("helpSearchMobile");a=a.target;do{if(a===b)return;a=a.parentNode}while(a);searchHelp.$refs.searchMobile.outsideClick()});this.currentPage=this.getCurrentPage();this.content=helpNSupportUtils.getDigitalHelp();
DigitalHelpEventBus.$on("breadcrumbMobile",this.visibilityBreadcrumbMobile);window.addEventListener("scroll",this.handleScroll)},mounted:function(){"/ajuda.html"!==window.location.pathname?(document.getElementById("digital-help-search-mobile-cmp").style.position="fixed",document.getElementById("digital-help-search-mobile-cmp").style.width="100%",document.getElementById("digital-help-search-mobile-cmp").style.backgroundColor="white"):document.getElementById("digital-help-search-mobile-cmp").classList.add("help-and-support__search--mobile--fixed")},
destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{visibilityBreadcrumbMobile:function(a){this.tmp=a},resetValues:function(){this.hints=[];this.showResults=this.showHints=!1;this.results=[];this.onlySearch=this.hasError=this.withoutResults=!1;this.page=1},outsideClick:function(){var a=this;setTimeout(function(){a.isMobileDevice()&&!a.test&&(a.test=!0,a.closeSearch())},1)},isMobileDevice:function(){return"undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},
closeSearch:function(){this.test=!this.test;if(this.hasVisibleResults){if(this.showResults=!1,$("#digital-help-search-mobile-cmp").hasClass("help-and-support__search--mobile--active")){var a=$("nav.header").height()+"px";document.getElementById("digital-help-search-mobile-cmp").style.top=a}}else this.resetValues(),this.searchInput="",document.getElementById("digital-help-search-mobile-cmp").classList.remove("help-and-support__search--mobile--active"),document.getElementById("digital-help-search-mobile-cmp").style.top=
0,"undefined"!==typeof background&&(background.$data.searchVisible=!0),"ajuda.html"===this.currentPage&&document.getElementById("homepageContent").classList.add("no-gutter--top");enableScroll()},clearSearchInput:function(){"icon-close"===this.getIcon()&&(this.searchInput="",this.test=!1,this.resetValues(),document.getElementById("searchInput").focus())},getIcon:function(){return""!==this.searchInput&&!this.hasVisibleResults||this.hasVisibleResults&&this.showResults?"icon-close":"icon-search"},goToPage:function(){var a,
b,d=helpNSupportUtils.checkIfUserIsLogged();"ajuda/contactos/formulario.html"===this.getCurrentPage()?formEmailBeginBreadcrumb&&formEmailBeginBreadcrumb.returnHomePage():("ajuda/contactos.html"===this.getCurrentPage()?(a="Help Contacts",b="Contacts Help \x26 Support"):"undefined"!==typeof this.articleId?(a=this.articleId,b="Article Help \x26 Support"):(a=this.selectedSubTopicTitle,b="Subtopic Help \x26 Support"),tealiumHelpAndSupport.methods.handleGoToHomePage(a,b,d),window.location.href=window.location.origin+
"/ajuda.html")},getHints:function(){this.resetValues();helpNSupportUtils.search(this.searchInput,1,this,!0)},setHintsFromSearch:function(a){a?"error"===a?this.hasError=!0:"object"===typeof a&&(0<a.length&&(this.hints=a),this.showHints=!0):this.hasError=!0},replaceInputAndSearch:function(a){this.searchInput===a?this.search():(this.onlySearch=!0,this.searchInput=a)},search:function(){""!==this.searchInput&&(this.firstSearchSelect=this.withoutResults=this.hasError=!1,this.loadGeneralAnimation({renderLocation:"help-search-hints-button",
path:"/content/dam/digital-commons/white_30px_stroke_15.json",cssClass:"loading--button",style:"left:90%"}),helpNSupportUtils.search(this.searchInput,this.page,this,!1));this.tealiumSearchTerms(this.searchInput)},setResultsFromSearch:function(a){this.removeAnimation("help-search-hints-button");this.results=[];this.showHints=!1;this.hints=[];a?"error"===a?this.hasError=!0:"object"===typeof a&&(0<a.length?(this.showResults=!0,this.results=a):this.withoutResults=!0):this.hasError=!0},getMoreResults:function(){this.tealiumSearchSeeMoreReSults();
this.firstSearchSelect=!1;this.page++;this.search()},selectArticle:function(a,b){this.tealiumClickSearchResults(a.title);this.tealiumViewSearchedArticle(a.title);localStorage.setItem("iframeToSelect",b);var d=0;0===b?1<this.page&&(d=5*(this.page-1)):d=5*(this.page-1)+b;helpNSupportUtils.trackSearchResultEvent(a.url,d,a.title,this.searchInput,this.page);if(this.firstSearchSelect)!a.selected&&0<$("#iframe"+b).length&&(b=$("#iframe"+b).position().top,$("html, body").animate({scrollTop:b},1E3));else{this.hasVisibleResults=
!0;window.scrollTo(0,0);this.parentDiv=$(".help-and-support__content").parent();$(".help-and-support__content").remove();$(this.parentDiv).append('\x3cdiv id\x3d"help-and-support__content" class\x3d"help-and-support__content help-and-support__content--search"\x3e\x3cdiv id\x3d"breadcrumb" class\x3d"breadcrumb-menu"\x3e\x3cdiv class\x3d"breadcrumb-menu__spring"\x3e\x3cdiv class\x3d"breadcrumb-menu__begin"\x3e\x3ca href\x3d"/ajuda.html"\x3eIn\u00edcio\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"help-and-support__content--loading"\x3e\x3c/div\x3e\x3c/div\x3e');
this.loadGeneralAnimation({renderLocation:"help-and-support__content--loading",withMask:!0,defaultColor:!0,style:"height: 150px; margin: 175px 0;display:block!important;"});this.firstSearchSelect=!0;b=!1;for(var d="",c=0;c<this.results.length;c++)this.results[c].url&&""!==this.results[c].url&&("undefined"!==typeof bus&&bus.$data.load.push("iframe"+c),b=!0,d+='\x3ciframe id\x3d"iframe'+c+'" class\x3d"width--100 no-visible" src\x3d"'+this.results[c].url+"?articles\x3d"+c+"\x26wcmmode\x3ddisabled\x26iframe\x3diframe"+
c+'" onload\x3d"iframeLoaded(\'iframe'+c+'\')" scrolling\x3d"no"\x3e\x3c/iframe\x3e');$("#help-and-support__content").append(d);b||this.removeAnimation("help-and-support__content--loading")}this.unselectArticles();a.selected=!0;this.showResults=!1},unselectArticles:function(){for(var a=0;a<this.results.length;a++)this.results[a].selected=!1},openSearch:function(){if(""!==this.searchInput&&this.hasVisibleResults||""===this.searchInput&&"ajuda.html"!==this.currentPage&&!this.hasVisibleResults)DigitalHelpEventBus.$emit("breadcrumbStatus",
!1),this.showResults=this.test=!0},applyOpacity:function(a){$(".help-and-support__content").css("opacity",a)},openCloseBreadcrumb:function(){this.$refs.openCloseBreadcrumb.style.display="none";document.body.scrollTop=0;document.documentElement.scrollTop=0;DigitalHelpEventBus.$emit("breadcrumbStatus")},handleScroll:function(){if(this.isMobileDevice()){var a=$("nav.header").height();if(0<$("nav.header").find(".js-navigation-language.navigation.navigation--zero").length){var b=$("nav.header").find(".js-navigation-language.navigation.navigation--zero").height();
0<$("nav.header").find(".js-navigation-static.navigation-static").length&&0<$("nav.header").find(".js-navigation-static.navigation-static").height()&&0<b&&(a-=b)}a+="px";$("#digital-help-search-mobile-cmp").hasClass("help-and-support__search--mobile--active")||searchHelp.$refs.searchMobile.$data.hasVisibleResults?document.getElementById("digital-help-search-mobile-cmp").style.top=a:"/ajuda.html"!==window.location.pathname&&(document.getElementById("digital-help-search-mobile-cmp").style.top=a)}},
tealiumSearchSeeMoreReSults:function(){var a=helpNSupportUtils.checkIfUserIsLogged();tealiumHelpAndSupport.methods.handleSearchSeeMoreReSults(a)},tealiumSearchTerms:function(a){var b=helpNSupportUtils.checkIfUserIsLogged();tealiumHelpAndSupport.methods.handleSearchTerms(b,a)},tealiumClickSearchResults:function(a){var b=helpNSupportUtils.checkIfUserIsLogged();tealiumHelpAndSupport.methods.handleClickSearchResults(b,a)},tealiumViewSearchedArticle:function(a){var b=helpNSupportUtils.checkIfUserIsLogged();
tealiumHelpAndSupport.methods.handleViewSearchedArticle(b,a)}}});var keys={37:1,38:1,39:1,40:1};function preventDefault(a){a=a||window.event;a.preventDefault&&a.preventDefault();a.returnValue=!1}function preventDefaultForScrollKeys(a){if(keys[a.keyCode])return preventDefault(a),!1}
function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1);window.onwheel=preventDefault;window.onmousewheel=document.onmousewheel=preventDefault;window.ontouchmove=preventDefault;document.onkeydown=preventDefaultForScrollKeys}
function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1);window.onmousewheel=document.onmousewheel=null;window.onwheel=null;window.ontouchmove=null;document.onkeydown=null};