var helpNSupportUtils=function(){var n="",p="";return{buildDigitalHelp:function(a){if(0<a.length&&a[1]){this.createSession();var b=JSON.parse("["+a[0]+"]");a=JSON.parse("["+a[1]+"]");b=this.removeNotVisibleTopics(b);b=this.joinTopicsNSubtopics(b,a);return this.setDigitalHelp(b)?this.setCurrentFromScratch():!1}},createSession:function(){if(!sessionStorage.getItem("sessionID")){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxx".replace(/[xy]/g,function(a){var b=(999999*Math.random()+16*Math.random())%16|0;return("x"===
a?b:b&3|8).toString(16)});sessionStorage.setItem("sessionID",a+"-"+(new Date).valueOf().toString())}},removeNotVisibleTopics:function(a){if(a&&0<a.length)for(var b=0;b<a.length;b++)if(0<a[b].topic.length)for(var c=0;c<a[b].topic.length;c++)a[b].topic[c].visible||a[b].topic.splice(c,1);return a},joinTopicsNSubtopics:function(a,b){if(b&&!this.isEmpty(b)&&a&&!this.isEmpty(a))for(var c=0;c<a.length;c++)if(a[c].topic&&0<a[c].topic.length)for(var d=0;d<a[c].topic.length;d++)for(var e=0;e<b.length;e++)a[c].topic[d].reference==
b[e].topic&&(a[c].topic[d].subtopics||(a[c].topic[d].subtopics=[]),a[c].topic[d].subtopics.push(b[e]));return a},setDigitalHelp:function(a){null!==localStorage.getItem("digitalHelp")&&localStorage.removeItem("digitalHelp");return this.isEmpty(a)?!1:(localStorage.setItem("digitalHelp",this.stringifyAndEncode(a)),!0)},getDigitalHelp:function(){return null!==localStorage.getItem("digitalHelp")?this.parseAndDecode(localStorage.getItem("digitalHelp")):!1},setCurrent:function(a,b,c,d){null!==localStorage.getItem("digitalHelpCurrent")&&
localStorage.removeItem("digitalHelpCurrent");localStorage.setItem("digitalHelpCurrent",this.stringifyAndEncode({group:a,topic:b,subTopic:c,article:d}));return!0},getCurrent:function(){if(null!==localStorage.getItem("digitalHelpCurrent")){var a=this.parseAndDecode(localStorage.getItem("digitalHelpCurrent"));if(a&&null!==a.group&&null!==a.topic&&null!==a.subTopic)return a}return!1},setDigitalHelpContacts:function(a){null!==localStorage.getItem("digitalHelpContacts")&&localStorage.removeItem("digitalHelpContacts");
return this.isEmpty(a)?!1:(localStorage.setItem("digitalHelpContacts",this.stringifyAndEncode(a)),!0)},getDigitalHelpContacts:function(){return null!==localStorage.getItem("digitalHelpContacts")?this.parseAndDecode(localStorage.getItem("digitalHelpContacts")):!1},findInArray:function(a,b,c,d){var e=this.getDigitalHelp(),f={group:null,topic:null,subTopic:null,article:null},g={group:[],topic:[],subTopic:[],article:[]};if(e&&0<e.length)for(var h=0;h<e.length;h++)if("group"===a){if(e[h][b]===c)if(f.group=
h,!0===d)g.group.push(h);else break}else if(e[h].hasOwnProperty("topic"))for(var k=0;k<e[h].topic.length;k++)if("topic"===a){if(e[h].topic[k][b]===c)if(f.group=h,f.topic=k,!0===d)g.group.push(h),g.topic.push(k);else break}else if(e[h].topic[k].hasOwnProperty("subtopics"))for(var l=0;l<e[h].topic[k].subtopics.length;l++)if("subtopic"===a){if(e[h].topic[k].subtopics[l][b]===c)if(f.group=h,f.topic=k,f.subTopic=l,!0===d)g.group.push(h),g.topic.push(k),g.subTopic.push(l);else break}else if(e[h].topic[k].subtopics[l].hasOwnProperty("article"))for(var m=
0;m<e[h].topic[k].subtopics[l].article.length;m++)if("article"===a&&e[h].topic[k].subtopics[l].article[m][b]===c)if(f.group=h,f.topic=k,f.subTopic=l,f.article=m,!0===d)g.group.push(h),g.topic.push(k),g.subTopic.push(l),g.article.push(m);else break;return!0===d?g:f},getTopicsAndSubtopics:function(){var a=this.getDigitalHelp(),b=[];if(a&&0<a.length)for(var c=0;c<a.length;c++)if(a[c].topic&&0<a[c].topic.length)for(var d=0;d<a[c].topic.length;d++)if(a[c].topic[d].title){var e={groupPos:c,topic:a[c].topic[d].title,
topicPos:d,subtopics:[]};if(a[c].topic[d].subtopics&&0<a[c].topic[d].subtopics.length)for(var f=0;f<a[c].topic[d].subtopics.length;f++)a[c].topic[d].subtopics[f].title&&e.subtopics.push({title:a[c].topic[d].subtopics[f].title,subtopicPos:f});b.push(e)}return b},getClassToArticle:function(a){return a?"class\x3d'hide'":""},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},stringifyAndEncode:function(a){return JSON.stringify(a)},parseAndDecode:function(a){return JSON.parse(a)},
hasDigitalHelp:function(){return null!==localStorage.getItem("digitalHelp")?!0:!1},search:function(a,b,c,d){var e=this;b=b?b:1;var f={query:a,operator:"or",responseType:"JsonObject",perPage:5,page:b},g=new XMLHttpRequest,h=btoa("1977:d064598f29894d11aac0eba6799f667c");g.open("POST","https://api.cludo.com/api/v3/1977/10746/search");g.setRequestHeader("authorization","Basic "+h);g.setRequestHeader("content-type","application/json; charset\x3dutf-8");g.onreadystatechange=function(){4===this.readyState&&
200===this.status?(e.trackSearchEvent(JSON.parse(this.responseText),a,b),d?e.buildHintsFromSearch(JSON.parse(this.responseText),c):e.buildResultsFromSearch(JSON.parse(this.responseText),c)):4===this.readyState&&(d?c.setHintsFromSearch("error"):c.setResultsFromSearch("error"))};g.send(JSON.stringify(f))},trackSearch:function(a,b){var c=new XMLHttpRequest;c.open("POST",b);c.setRequestHeader("content-type","application/json; charset\x3dutf-8");c.onreadystatechange=function(){-1!==b.indexOf("querylog")&&
""!==this.response&&(p=this.response)};c.send(JSON.stringify(a))},trackSearchEvent:function(a,b,c){n=this.isEmpty(a)?"":a.QueryId;a={sw:b,refurl:window.location.href,refpt:document.title,hn:window.location.hostname,ua:ContextHub.getItem("surferinfo").browser.userAgent,sz:ContextHub.getItem("surferinfo").display.resolution.width+"x"+ContextHub.getItem("surferinfo").display.resolution.height,pn:c.toString(),rc:this.isEmpty(a)?"":a.TotalDocument.toString(),qid:n,rt:this.isEmpty(a)?"":a.ResponseTime.toString(),
fquery:this.isEmpty(a)?"":a.FixedQuery,sid:sessionStorage.getItem("sessionID")};this.trackSearch(a,"https://api.cludo.com/api/v3/1977/10746/search/pushstat/querylog")},trackSearchResultEvent:function(a,b,c,d,e){a={sz:ContextHub.getItem("surferinfo").display.resolution.width+"x"+ContextHub.getItem("surferinfo").display.resolution.height,ua:ContextHub.getItem("surferinfo").browser.userAgent,refurl:window.location.href,refpt:document.title,sw:d,pn:e,hn:window.location.hostname,qid:n,qsid:p,clurl:a,cli:b,
title:c,sid:sessionStorage.getItem("sessionID")};this.trackSearch(a,"https://api.cludo.com/api/v3/1977/10746/search/pushstat/clicklog")},buildHintsFromSearch:function(a,b){var c=[];if(!this.isEmpty(a)){if(a.Suggestions&&0<a.Suggestions.length)for(var d=0;d<a.Suggestions.length;d++)c.push(a.Suggestions[d].Text);b.setHintsFromSearch(c)}},buildResultsFromSearch:function(a,b){var c=[];if(!this.isEmpty(a)){if(a.TypedDocuments&&0<a.TypedDocuments.length)for(var d=0;d<a.TypedDocuments.length;d++)if(a.TypedDocuments[d].FieldNames&&
0<a.TypedDocuments[d].FieldNames.length&&a.TypedDocuments[d].Fields){for(var e=[],f=0;f<a.TypedDocuments[d].FieldNames.length;f++)e.push(a.TypedDocuments[d].FieldNames[f]);if(0<e.length){for(var g={},f=0;f<e.length;f++)g[e[f].toLowerCase()]=a.TypedDocuments[d].Fields[e[f]].Value,"url"==e[f].toLowerCase()&&(g[e[f].toLowerCase()]=g[e[f].toLowerCase()].replace(g.domainname,window.location.origin+"/ajuda/")),g.selected=!1;this.isEmpty(g)||c.push(g)}}b.setResultsFromSearch(c)}},validateContentToArticle:function(a,
b){return b&&null!==b.group&&null!==b.topic&&null!==b.subTopic&&null!==b.article&&a&&0<a.length&&a[b.group]&&a[b.group].topic&&0<a[b.group].topic.length&&a[b.group].topic[b.topic]&&a[b.group].topic[b.topic].subtopics&&0<a[b.group].topic[b.topic].subtopics.length&&a[b.group].topic[b.topic].subtopics[b.subTopic]&&a[b.group].topic[b.topic].subtopics[b.subTopic].article&&0<a[b.group].topic[b.topic].subtopics[b.subTopic].article.length&&a[b.group].topic[b.topic].subtopics[b.subTopic].article[b.article]&&
a[b.group].topic[b.topic].subtopics[b.subTopic].article[b.article].articlepage?!0:!1},checkIfUserIsLogged:function(){return SessionBus.loggedIn},setCurrentFromScratch:function(){if(!this.getSubtopicPositionByLocation()){if(this.getCurrent())return!0;if(!this.getArticlePositionByLocation()){var a=!1,b=this.getDigitalHelp();if(b&&0<b.length)for(var c=0;c<b.length;c++){if(b[c].topic&&0<b[c].topic.length)for(var d=0;d<b[c].topic.length;d++){if(b[c].topic[d].subtopics&&0<b[c].topic[d].subtopics.length)for(var e=
0;e<b[c].topic[d].subtopics.length;e++)if(b[c].topic[d].subtopics[e].article&&0<b[c].topic[d].subtopics[e].article.length){this.setCurrent(c,d,e);a=!0;break}if(a)break}if(a)break}return a}}return!0},getSubtopicPositionByLocation:function(){var a=window.location.pathname;return a&&(a=this.findInArray("subtopic","matchVanityUrl",a,!1))&&null!==a.group&&null!==a.topic&&null!==a.subTopic?(this.setCurrent(a.group,a.topic,a.subTopic),!0):!1},getArticlePositionByLocation:function(){var a=window.location.pathname;
if(a&&-1!=a.indexOf("/artigos/")){var b=a.lastIndexOf(".");if(-1!=b&&(a=a.substr(0,b))&&(a=this.findInArray("article","articlepage",a,!1))&&null!==a.group&&null!==a.topic&&null!==a.subTopic&&null!==a.article)return this.setCurrent(a.group,a.topic,a.subTopic,a.article),!0}return!1}}}();