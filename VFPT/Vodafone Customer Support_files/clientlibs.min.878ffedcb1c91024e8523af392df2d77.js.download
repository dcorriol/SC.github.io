Vue.component("search-desktop",{mixins:[utils,navigation,loadingAnimations],template:"#digital-help-search-desktop",props:{},data:function(){return{i18nLabels:{searchFirstMessage:this.i18nUtils().getProperty("search_first_message"),searchSecondMessage:this.i18nUtils().getProperty("search_second_message"),searchDescription:this.i18nUtils().getProperty("search_description"),searchPlaceholder:this.i18nUtils().getProperty("search_placeholder"),searchGetMoreResults:this.i18nUtils().getProperty("search_get_more_results"),
searchLabel:this.i18nUtils().getProperty("search_label"),searchErrorMessage:this.i18nUtils().getProperty("search_error_message"),searchWithoutResultsMessage:this.i18nUtils().getProperty("search_without_results_message")},searchInput:"",searchSize:"",searchPosition:"fixed",searchTop:"",hasResults:!1,results:[],content:[],firstSearchSelect:!1,parentDiv:"",page:1,hasError:!1,withoutResults:!1}},methods:{clearSearchInput:function(){this.searchInput=""},onResize:function(){this.searchSize=document.getElementById("digital-help-search").offsetWidth-
2+"px";this.handleHouseScroll()},handleHouseScroll:function(){var a=$(".footer");if(0<a.length){var b=$(window),a=a.offset().top-140-b.scrollTop(),c=$("#searchDesktopMainContent").outerHeight(!0)+$(".js-navigation.navigation.navigation--primary.component__icon-background.navigation--fixed.navigation--closed").outerHeight(!0);this.hasResults||(c+=226);"absolute"!==this.searchPosition&&a<=c?(this.searchPosition="absolute",this.$nextTick(function(){searchHelp.$refs.searchDesktop.searchTop=$(".footer").offset().top-
$(".help-and-support__search--desktop").height()-253+"px"})):a>c&&(this.searchPosition="fixed",this.hasResults?(a=0,a=window.matchMedia("(max-width: 970px)"),0===b.scrollTop()?a="":(a=a.matches?0<b.scrollTop()?60:68:37>b.scrollTop()?109-b.scrollTop():72,a+="px"),this.searchTop=a):this.searchTop="")}},search:function(a,b){this.withoutResults=this.hasError=!1;this.page=a?1:this.page;this.firstSearchSelect=!1;""!==this.searchInput&&(a?b?this.loadGeneralAnimation({renderLocation:"help--search--full--button",
path:"/content/dam/digital-commons/white_30px_stroke_15.json",cssClass:"loading--button",style:"left:90%"}):this.loadAnimationReplaceImage({renderLocation:"help--search--button",imageToReplace:"help--search--button-svg",withMask:!1,defaultColor:!1,style:"height: 30px;width: 30px;",path:"/content/dam/digital-commons/white_30px_stroke_15.json"}):this.loadGeneralAnimation({renderLocation:"help--more--search--button",path:"/content/dam/digital-commons/white_30px_stroke_15.json",cssClass:"loading--button",
style:"left:90%"}),helpNSupportUtils.search(this.searchInput,this.page,this,!1));this.tealiumSearchTerms(this.searchInput)},setResultsFromSearch:function(a){this.removeAnimationReplaceImage("help--search--button","help--search--button-svg");this.removeAnimation("help--more--search--button");this.removeAnimation("help--search--full--button");0<$("#help--search--button-svg").length&&$("#help--search--button-svg").css("display","inline-block");a&&0<a.length?(this.hasResults=!0,this.results=a,this.handleHouseScroll(),
this.updateSearchSession()):"error"===a?(this.hasError=this.hasResults=!0,this.results=[],sessionStorage.removeItem("search")):0===a.length&&(this.hasResults=!0,this.results=[],this.withoutResults=!0,sessionStorage.removeItem("search"))},selectArticle:function(a,b){this.tealiumClickSearchResults(a.title);var c=0;0===b?1<this.page&&(c=5*(this.page-1)):c=5*(this.page-1)+b;helpNSupportUtils.trackSearchResultEvent(a.url,c,a.title,this.searchInput,this.page);if(this.firstSearchSelect)!a.selected&&0<$("#iframe"+
b).length&&(a=$("#iframe"+b).position().top+60,$("html, body").animate({scrollTop:a},1E3));else{window.scrollTo(0,0);this.parentDiv=$(".help-and-support__content").parent();$(".help-and-support__content").remove();$(this.parentDiv).append('\x3cdiv id\x3d"help-and-support__content" class\x3d"help-and-support__content help-and-support__content--search"\x3e\x3cdiv id\x3d"breadcrumb" class\x3d"breadcrumb-menu"\x3e\x3cdiv class\x3d"breadcrumb-menu__spring"\x3e\x3cdiv class\x3d"breadcrumb-menu__begin"\x3e\x3ca href\x3d"/ajuda.html"\x3eIn\u00edcio\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"help-and-support__content--loading"\x3e\x3c/div\x3e\x3c/div\x3e');
this.loadGeneralAnimation({renderLocation:"help-and-support__content--loading",withMask:!0,defaultColor:!0,style:"height: 150px; margin: 175px 0;display:block!important;"});this.firstSearchSelect=!0;b=!1;for(var c="",d=0;d<this.results.length;d++)this.results[d].url&&""!==this.results[d].url&&("undefined"!==typeof bus&&bus.$data.load.push("iframe"+d),b=!0,c+='\x3ciframe id\x3d"iframe'+d+'" class\x3d"width--100 no-visible" src\x3d"'+this.results[d].url+"?articles\x3d"+d+"\x26wcmmode\x3ddisabled\x26iframe\x3diframe"+
d+'" onload\x3d"iframeLoaded(\'iframe'+d+'\')" scrolling\x3d"no"\x3e\x3c/iframe\x3e');$("#help-and-support__content").append(c);b||this.removeAnimation("help-and-support__content--loading");this.unselectArticles();a.selected=!0}},unselectArticles:function(){for(var a=0;a<this.results.length;a++)this.results[a].selected=!1},getMoreResults:function(){this.tealiumSearchSeeMoreReSults();this.firstSearchSelect=!1;this.page++;this.search(!1)},updateSearchSession:function(){sessionStorage.setItem("search",
JSON.stringify({firstSearchSelect:this.firstSearchSelect,page:this.page,results:this.results,hasResults:this.hasResults,hasError:this.hasError,withoutResults:this.withoutResults,searchInput:this.searchInput}))},tealiumSearchSeeMoreReSults:function(){var a=helpNSupportUtils.checkIfUserIsLogged();tealiumHelpAndSupport.methods.handleSearchSeeMoreReSults(a)},tealiumSearchTerms:function(a){var b=helpNSupportUtils.checkIfUserIsLogged();tealiumHelpAndSupport.methods.handleSearchTerms(b,a)},tealiumClickSearchResults:function(a){var b=
helpNSupportUtils.checkIfUserIsLogged();tealiumHelpAndSupport.methods.handleClickSearchResults(b,a)},tealiumViewSearchedArticle:function(a){var b=helpNSupportUtils.checkIfUserIsLogged();tealiumHelpAndSupport.methods.handleViewSearchedArticle(b,a)}},created:function(){if(sessionStorage.getItem("search")){var a=JSON.parse(sessionStorage.getItem("search"));this.firstSearchSelect=a.firstSearchSelect;this.page=a.page;this.results=a.results;this.hasResults=a.hasResults;this.hasError=a.hasError;this.withoutResults=
a.withoutResults;this.searchInput=a.searchInput}this.content=helpNSupportUtils.getDigitalHelp();DigitalHelpEventBus.$on("newActiveArticle",function(a){this.unselectArticles();this.results&&0<this.results.length&&(this.results[a].selected=!0,this.tealiumViewSearchedArticle(this.results[a].title))}.bind(this))},mounted:function(){window.addEventListener("resize",this.onResize);window.addEventListener("scroll",this.handleHouseScroll);this.onResize()},beforeDestroy:function(){window.removeEventListener("resize",
this.onResize);window.removeEventListener("scroll",this.handleHouseScroll)}});